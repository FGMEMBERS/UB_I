%%
%% Propeller for German type UB I submarine.
%%
%% Known: Diameter 3'-6-1/2" diameter, 1'-5" pitch (UC I type)
%%        Engine power 60 hp @ 500 rpm.
%%        Max speed 6.5-7.5 knots.
%%

%% Assumed properties of seawater
%%   density:             1027.68 kg/m^3
%%   kinematic Viscosity: 0.00000183 m^2/s
%%   speed of sound:      1560 m/s


%% JavaProp parameters.
%%
%%   Diameter                1.0 m
%%   Spinner Dia.  Dsp       0.2 m
%%   Speed of Rotation       500 1/min
%%   Velocity                3.60 m/s
%%   Number of Blades        3
%%   Power  P                44742 W
%%

JP = [
%v/(nD)	v/(ΩR)	Ct	Cp	Cs	Pc	η	η*	stalled	v	n	Power	Thrust	Torque
%[-]	[-]	[-]	[-]	[-]	[-]	[%]	[%]	[%]	[m/s]	
0.000	0.000	0.198442	0.129143	0.000047	999999.000000	0.00	0.00	47.00 	0.00	500	76.804	14.162	1.467
0.050	0.016	0.191296	0.117767	0.076695	2399.135334	8.12	13.01	97.00 	0.42	500	70.039	13.652	1.338
0.100	0.032	0.179428	0.114693	0.154203	292.064347	15.64	24.94	16.00 	0.83	500	68.211	12.805	1.303
0.150	0.048	0.170516	0.110957	0.232842	83.718253	23.05	35.53	1.00 	1.25	500	65.988	12.169	1.260
0.200	0.064	0.160360	0.106961	0.312741	34.046867	29.98	45.05	0.00 	1.67	500	63.612	11.444	1.215
0.250	0.080	0.147071	0.101481	0.395060	16.538777	36.23	53.84	0.00 	2.08	500	60.353	10.496	1.153
0.300	0.095	0.132970	0.095140	0.480229	8.973043	41.93	61.77	0.00	2.50	500	56.582	9.490	1.081
0.350	0.111	0.113378	0.085046	0.572977	5.051150	46.66	69.58	0.00	2.92	500	50.579	8.091	0.966
0.400	0.127	0.104154	0.080695	0.661745	3.210743	51.63	75.02	0.00	3.33	500	47.991	7.433	0.917
0.450	0.143	0.088878	0.072278	0.761047	2.019797	55.34	80.53	0.00	3.75	500	42.985	6.343	0.821
0.500	0.159	0.071793	0.062303	0.871100	1.269227	57.62	85.56	0.00	4.17	500	37.053	5.124	0.708
0.550	0.175	0.053951	0.051302	0.996174	0.785216	57.84	90.04	0.00	4.58	500	30.511	3.850	0.583
0.600	0.191	0.035716	0.039505	1.145041	0.465733	54.25	93.94	0.00	5.00	500	23.494	2.549	0.449
0.610	0.194	0.031607	0.036784	1.180862	0.412671	52.42	94.72	0.00	5.08	500	21.876	2.256	0.418
0.620	0.197	0.028022	0.034384	1.216524	0.367384	50.53	95.40	0.00	5.17	500	20.449	2.000	0.391
0.630	0.201	0.024242	0.031842	1.255281	0.324277	47.96	96.09	0.00	5.25	500	18.937	1.730	0.362
0.640	0.204	0.020407	0.029239	1.297145	0.284026	44.67	96.76	0.00	5.33	500	17.389	1.456	0.332
0.650	0.207	0.016712	0.026721	1.341355	0.247770	40.65	97.39	0.00	5.42	500	15.891	1.193	0.304
0.660	0.210	0.013079	0.024229	1.388921	0.214605	35.63	97.99	0.00	5.50	500	14.409	0.933	0.275
0.670	0.213	0.009332	0.021653	1.442016	0.183333	28.88	98.59	0.00	5.58	500	12.878	0.666	0.246
0.680	0.216	0.005505	0.019021	1.501971	0.154046	19.68	99.18	0.00	5.67	500	11.312	0.393	0.216
0.690	0.220	0.001592	0.016327	1.571335	0.126559	6.73	99.77	0.00	5.75	500	9.710	0.114	0.185
0.700	0.223	-0.002368	0.013600	1.653453	0.100967	0.00	99.99	0.00	5.83	500	8.088	-0.169	0.154
0.710	0.226	-0.006492	0.010760	1.757518	0.076552	0.00	99.99	0.00	5.92	500	6.399	-0.463	0.122
0.720	0.229	-0.010312	0.008122	1.885367	0.055415	0.00	99.99	0.00	6.00	500	4.831	-0.736	0.092
0.730	0.232	-0.013993	0.005577	2.060805	0.036509	0.00	99.99	0.00	6.08	500	3.317	-0.999	0.063
0.740	0.236	-0.018419	0.002539	2.445117	0.015955	0.00	99.99	0.00	6.17	500	1.510	-1.315	0.029
0.750	0.239	-0.023007	-0.000609	3.297219	-0.003676	0.37	55.94	0.00	6.25	500	-0.362	-1.642	-0.007
];

C_Thrust1 = [JP(:,1) JP(:,3)];

C_Power1 = [JP(:,1) JP(:,4)];

Efficiency = C_Thrust1(:,1) .* C_Thrust1(:,2) ./ C_Power1(:,2);

%% Thrust and Power v.s. advance ratio.

figure();
axis();
plot(C_Thrust1(:,1), C_Thrust1(:,2),\
     C_Power1(:,1), C_Power1(:,2));

%% Efficiency v.s. advance ratio.
figure();
axis([0 1 0 1]);
plot(C_Thrust1(:,1), Efficiency);

Advance = 0:0.05:2.00;

C_Thrust = [Advance' \
            interp1(C_Thrust1(:,1),C_Thrust1(:,2), Advance, 'extrap')'];

C_Power = [Advance' \
           interp1(C_Power1(:,1),C_Power1(:,2), Advance, 0.01)'];

figure();
plot(Advance, C_Thrust(:,2), Advance, C_Power(:,2));
